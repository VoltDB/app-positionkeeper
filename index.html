<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>App-positionkeeper by VoltDB</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>App-positionkeeper</h1>
        <p>Track portfolio position and monitor margin risk, updating with every trade or component price change</p>

        <p class="view"><a href="https://github.com/VoltDB/app-positionkeeper">View the Project on GitHub <small>VoltDB/app-positionkeeper</small></a></p>


        <ul>
          <li><a href="https://github.com/VoltDB/app-positionkeeper/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/VoltDB/app-positionkeeper/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/VoltDB/app-positionkeeper">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="voltdb-example-app-position-keeper" class="anchor" href="#voltdb-example-app-position-keeper"><span class="octicon octicon-link"></span></a>VoltDB Example App: Position Keeper</h1>

<h2>
<a name="use-case" class="anchor" href="#use-case"><span class="octicon octicon-link"></span></a>Use Case</h2>

<p>This application simulates a simple position keeper applicaton that maintains the positions of portfolios that are updated frequently as trades and price changes occur.</p>

<h2>
<a name="code-organization" class="anchor" href="#code-organization"><span class="octicon octicon-link"></span></a>Code organization</h2>

<p>The code is divided into two projects:</p>

<ul>
<li>"db": the database project, which contains the schema, stored procedures and other configurations that are compiled into a catalog and run in a VoltDB database.<br>
</li>
<li>"client": a java client that loads a set of cards and then generates random card transactions a high velocity to simulate card activity.</li>
</ul><p>See below for instructions on running these applications.  For any questions, 
please contact <a href="mailto:fieldengineering@voltdb.com">fieldengineering@voltdb.com</a>.</p>

<h2>
<a name="pre-requisites" class="anchor" href="#pre-requisites"><span class="octicon octicon-link"></span></a>Pre-requisites</h2>

<p>Before running these scripts you need to have VoltDB 4.0 (Enterprise or Community) or later installed, and you should add the voltdb-$(VERSION)/bin directory to your PATH environment variable, for example:</p>

<pre><code>export PATH="$PATH:$HOME/voltdb-ent-4.0.2/bin"
</code></pre>

<h2>
<a name="instructions" class="anchor" href="#instructions"><span class="octicon octicon-link"></span></a>Instructions</h2>

<ol>
<li>
<p>Start the database in the background</p>

<p>./start_db.sh</p>
</li>
<li>
<p>Run the client application</p>

<p>./run_client.sh</p>
</li>
</ol><p>Note: this client can only be run once, not repeatedly, or it will stop with unique constraint violations.  To run it again, the database needs to be stopped and restarted, or all of the tables need to be truncated.</p>

<ol>
<li>
<p>To stop the database and clean up temp files</p>

<p>voltadmin shutdown
./clean.sh</p>
</li>
</ol><h2>
<a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options</h2>

<p>You can control various characteristics of the demo by modifying the parameters passed into the InvestmentBenchmark java application in the run_client.sh script.</p>

<p>Speed &amp; Duration:</p>

<pre><code>--duration=120                (benchmark duration in seconds)
--autotune=true               (true = ignore rate limit, run at max throughput until latency is impacted)
                              (false = run at the specified rate limit)
--ratelimit=20000             (when autotune=false, run up to this rate of requests/second)
</code></pre>

<p>Use case parameters:</p>

<pre><code>--traders=1000                 (number of traders)
--secpercnt=10                 (number of securities each trader has in their portfolio)
</code></pre>

<h2>
<a name="instructions-for-running-on-a-cluster" class="anchor" href="#instructions-for-running-on-a-cluster"><span class="octicon octicon-link"></span></a>Instructions for running on a cluster</h2>

<p>Before running this demo on a cluster, make the following changes:</p>

<ol>
<li>
<p>On each server, edit the start_db_cluster.sh file to set the HOST variable to the name of the <strong>first</strong> server in the cluster:</p>

<p>HOST=voltserver01</p>
</li>
<li>
<p>On each server, edit db/deployment-cluster.xml to set hostcount to the correct number of servers:</p>

<p></p>
</li>
</ol><p>Also, in the same file, set the voltdbroot path to an appropriate path for your servers.</p>

<ol>
<li>
<p>On each server, run the start script:</p>

<p>./start_db_cluster.sh</p>
</li>
<li>
<p>On one server, Edit the run_client.sh script to set the SERVERS variable to a comma-separated list of the servers in the cluster</p>

<p>SERVERS=voltserver01,voltserver02,voltserver03</p>
</li>
<li>
<p>Run the client script:</p>

<p>./run_client.sh</p>
</li>
</ol>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/VoltDB">VoltDB</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-47652901-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>